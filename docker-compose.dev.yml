# Dev: контейнер запускает Next.js, код редактируется локально и подмонтирован
services:
  app:
    build:
      context: .
      dockerfile: Dockerfile.dev
    ports:
      - "3000:3000"
    volumes:
      # Локальный проект — изменения сразу видны в контейнере
      - .:/app
      # Свой node_modules в контейнере (не перезаписывать с хоста)
      - app_node_modules:/app/node_modules
    environment:
      - HOSTNAME=0.0.0.0
      # Нужно для отслеживания изменений файлов при монтировании с хоста
      - WATCHPACK_POLLING=true
    command: sh -c "npm install && npm run dev"

volumes:
  app_node_modules:
